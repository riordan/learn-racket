<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>Alternative Data Designs</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">On Ht<span class="mywbr"> &nbsp;</span>DP</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="turing_is_useless.html" class="tocviewlink" data-pltdoc="x">Turing is Useless</a></td></tr><tr><td align="right"></td><td><a href="Alternative_Data_Designs.html" class="tocviewselflink" data-pltdoc="x">Alternative Data Designs</a></td></tr><tr><td align="right"></td><td><a href="_SL__Not_Racket.html" class="tocviewlink" data-pltdoc="x">*SL, Not Racket</a></td></tr><tr><td align="right"></td><td><a href="Teaching_With_HtDP.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Teaching With Ht<span class="mywbr"> &nbsp;</span>DP</span></a></td></tr><tr><td align="right"></td><td><a href="colleagues.html" class="tocviewlink" data-pltdoc="x">Ht<span class="mywbr"> &nbsp;</span>DP Courses and Colleagues</a></td></tr><tr><td align="right"></td><td><a href="coop.html" class="tocviewlink" data-pltdoc="x"><span style="font-style: italic">Teach<span class="mywbr"> &nbsp;</span>Scheme!</span> and co-<wbr></wbr>op</a></td></tr><tr><td align="right"></td><td><a href="what_is_ts.html" class="tocviewlink" data-pltdoc="x">What is <span style="font-style: italic">Teach<span class="mywbr"> &nbsp;</span>Scheme!</span></a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td></td><td><a href="Alternative_Data_Designs.html" class="tocviewselflink" data-pltdoc="x">Alternative Data Designs</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Alternative_Data_Designs.html#%28part._.Strings_are_.Final%29" class="tocviewlink" data-pltdoc="x">Strings are Final</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Alternative_Data_Designs.html#%28part._.Worlds_and_.Final_.Worlds%29" class="tocviewlink" data-pltdoc="x">Worlds and Final Worlds</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Alternative_Data_Designs.html#%28part._.Empty_is_.Useless%29" class="tocviewlink" data-pltdoc="x">Empty is Useless</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Alternative_Data_Designs.html#%28part._.Conclusion%29" class="tocviewlink" data-pltdoc="x">Conclusion</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="Alternative_Data_Designs.html#%28part._.Strings_are_.Final%29" class="tocsubseclink" data-pltdoc="x">Strings are Final</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="Alternative_Data_Designs.html#%28part._.Worlds_and_.Final_.Worlds%29" class="tocsubseclink" data-pltdoc="x">Worlds and Final Worlds</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="Alternative_Data_Designs.html#%28part._.Empty_is_.Useless%29" class="tocsubseclink" data-pltdoc="x">Empty is Useless</a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="Alternative_Data_Designs.html#%28part._.Conclusion%29" class="tocsubseclink" data-pltdoc="x">Conclusion</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">6.1.0.8</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="turing_is_useless.html" title="backward to &quot;Turing is Useless&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;On HtDP&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="_SL__Not_Racket.html" title="forward to &quot;*SL, Not Racket&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3><a name="(part._.Alternative_.Data_.Designs)"></a>Alternative Data Designs</h3><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>12 June 2011</p></blockquote></blockquote></blockquote><p>Early this year, Stephen Bloch posted the following problem on the mailing
list:</p><blockquote><p>The game presents the player with a collection of
randomly located dots on a canvas. Every second the collection changes and
one point is added. The player uses the mouse to &ldquo;chase&rdquo; the points.
The game ends when the player clicks on one of the dots, at which point
the game software should display the text &ldquo;Congratulations!&rdquo; in the
center of the canvas.</p></blockquote><p><div class="SIntrapara">He noted that a solution to this problem based on the &ldquo;world&rdquo; library
 looks complex and thus seems to expose a gap in the library&rsquo;s
 interface. Specifically, a student who designs a world program may
 naturally come up with the following data representation for this game
 world:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a name="(tech._dotgameworld)"></a><span style="font-style: italic">DotGameWorld</span><span class="RktCmt"> = [Listof Posn]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Posn = (make-posn Nat Nat)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">interpretation: the centers of the dots </span></td></tr></table></blockquote></div><div class="SIntrapara">Since the problem statement basically dictates the use of an
 <span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29" class="RktStxLink" data-pltdoc="x">on-tick</a></span> and an <span class="refelem"><span class="refcolumn"><span class="refcontent">See
<a href="http://www.ccs.neu.edu/home/matthias/HtDP2e/htdp2e-part1.html#(part._.D.K._design-world)">Designing
World Programs</a> for designing world programs.</span></span></span>
 <span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-mouse%29%29" class="RktStxLink" data-pltdoc="x">on-mouse</a></span> handler, this choice of data representation induces the
 following wish list and possibly more:
</div><div class="SIntrapara"><ul><li><p><div class="SIntrapara">a tick handler:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="Alternative_Data_Designs.html#%28tech._dotgameworld%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld</span></a><span class="RktCmt"> -&gt; </span><a href="Alternative_Data_Designs.html#%28tech._dotgameworld%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld</span></a><span class="RktCmt"> </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">create a random world that is one posn longer than this one </span></td></tr></table></blockquote></div></p></li><li><p><div class="SIntrapara">a rendering function:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="Alternative_Data_Designs.html#%28tech._dotgameworld%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld</span></a><span class="RktCmt"> -&gt; Image </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render this world as a scene of dots </span></td></tr></table></blockquote></div></p></li><li><p><div class="SIntrapara">a mouse handler:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="Alternative_Data_Designs.html#%28tech._dotgameworld%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld</span></a><span class="RktCmt"> Nat Nat MouseEvent -&gt; </span><a href="Alternative_Data_Designs.html#%28tech._dotgameworld%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld</span></a><span class="RktCmt"> </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">is the player</span><span class="RktCmt">'</span><span class="RktCmt">s mouse click on a dot in this world? </span></td></tr></table></blockquote></div></p></li><li><p><div class="SIntrapara">a function that checks whether the game is over:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="Alternative_Data_Designs.html#%28tech._dotgameworld%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld</span></a><span class="RktCmt"> -&gt; Boolean </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">is the game over? </span></td></tr></table></blockquote></div></p></li></ul></div><div class="SIntrapara">Furthermore the design recipe for world programs demands a <span class="RktSym">main</span>
 function that looks roughly like this:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Nat -&gt; </span><a href="Alternative_Data_Designs.html#%28tech._dotgameworld%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">start the world with n+1 dots </span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">main</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29" class="RktStxLink" data-pltdoc="x">big-bang</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">random-world</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._add1%29%29" class="RktValLink" data-pltdoc="x">add1</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29" class="RktStxLink" data-pltdoc="x">on-tick</a></span><span class="hspace">&nbsp;</span><span class="RktSym">add-one</span><span class="hspace">&nbsp;</span><span class="highlighted"><span class="RktVal">1</span></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29" class="RktStxLink" data-pltdoc="x">to-draw</a></span><span class="hspace">&nbsp;</span><span class="RktSym">draw-dots</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-mouse%29%29" class="RktStxLink" data-pltdoc="x">on-mouse</a></span><span class="hspace">&nbsp;</span><span class="RktSym">catch-one</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29" class="RktStxLink" data-pltdoc="x">stop-when</a></span><span class="hspace">&nbsp;</span><span class="RktSym">over?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">As the problem statement says, it makes the clock tick once per second.</div></p><p>With a bit of further reflection, it becomes clear that the mouse event
 handler plays two distinct roles. The API dictates that it processes a
 mouse click, meaning it consumes an element of <a href="Alternative_Data_Designs.html#%28tech._dotgameworld%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld</span></a> and
 some extra arguments and that it produces an element of
 <a href="Alternative_Data_Designs.html#%28tech._dotgameworld%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld</span></a>. The game specification demands that, in case the
 mouse click is on a dot, the world it returns signals that the game is
 over. Similarly, the <span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29" class="RktStxLink" data-pltdoc="x">stop-when</a></span> handler wants to know which worlds
 signal that the game is over. Nothing in the data definition indicates,
 however, which lists represent a world in which the player has caught a
 dot. In short, it is unclear when the game should end.</p><p>The purpose of this note is to show how different data representations for
 one and the same &ldquo;world&rdquo; work differently with the constraints of a
 library&rsquo;s interface. In this case, one &ldquo;obvious&rdquo; fix is to add a
 distinct set of &ldquo;final&rdquo; worlds to the data representation; another one
 is to designate one kind of world as special. Each choice comes with
 advantages and disadvantages, and your students need to learn to
 appreciate that choices of data representation have implications for the
 design of functions.</p><h4>1<tt>&nbsp;</tt><a name="(part._.Strings_are_.Final)"></a>Strings are Final</h4><p><div class="SIntrapara">Stephen Bloch&rsquo;s students suggest that the mouse handler should return a
 string when the player hits a dot on the canvas:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">catch-one</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym">me</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/if.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpuniverse.html#%28def._world._%28%28lib._2htdp%2Funiverse..rkt%29._mouse~3d~3f%29%29" class="RktValLink" data-pltdoc="x">mouse=?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"button-down"</span><span class="hspace">&nbsp;</span><span class="RktSym">me</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">is-on-a-dot?</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"CONGRATULATIONS!"</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/if.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Technically, a string is illegal as a return value given our definition of
 <a href="Alternative_Data_Designs.html#%28tech._dotgameworld%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld</span></a> above. But that&rsquo;s easy to fix. All we have to do is
 add strings to the world definition:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a name="(tech._dotgameworld..v2)"></a><span style="font-style: italic">DotGameWorld.v2</span><span class="RktCmt"> is one of</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> String </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&ndash;</span><span class="RktCmt"> [Listof Posn]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">interpretation: a string represents a final world </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">and a list represents the centers of the dots </span></td></tr></table></blockquote></div><div class="SIntrapara">But this is where the trouble starts.</div></p><p><div class="SIntrapara">Now every single handler function consumes and produces elements of
 <a href="Alternative_Data_Designs.html#%28tech._dotgameworld..v2%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld.v2</span></a>. If we follow the design recipe, every handler
 function starts with a conditional that differentiates strings from lists
 of Posns. For example, the function that deals with clock ticks must have
 this shape:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="Alternative_Data_Designs.html#%28tech._dotgameworld..v2%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld.v2</span></a><span class="RktCmt"> -&gt; </span><a href="Alternative_Data_Designs.html#%28tech._dotgameworld..v2%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld.v2</span></a></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-one</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/if.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list~3f%29%29" class="RktValLink" data-pltdoc="x">list?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">And that, even though <span class="RktSym">tick-handler</span> is never applied to a
 string. Only one of our functions will ever see a string in the course of
 a normal game, and that is the function that stops whether the game is
 over:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="Alternative_Data_Designs.html#%28tech._dotgameworld..v2%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld.v2</span></a><span class="RktCmt"> -&gt; Boolean </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">is the game over?</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">over?</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>What this exercise teaches us is that this kind of data representation is
 bad. It forces the designer of the functions to account for pieces of data
 that never show up. Even for a small program like this one, the extra
 overhead reduces the readability of the program. The situation calls for
 going beyond the first, obvious design.</p><h4>2<tt>&nbsp;</tt><a name="(part._.Worlds_and_.Final_.Worlds)"></a>Worlds and Final Worlds</h4><p>At this point it is important to recall that a data definition describes a
 set of data. More precisely, it describes a subset of all possible values
 in our programming language, and even better, it provides instructions for
 how to construct all the elements. The question is how this understanding
 helps with our problem.</p><p>Here is how. We describe handlers as functions that consume elements of
 <a href="Alternative_Data_Designs.html#%28tech._dotgameworld%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld</span></a> and allow the mouse event handler to produce elements
 of <a href="Alternative_Data_Designs.html#%28tech._dotgameworld..v2%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld.v2</span></a>, which is a <span style="font-style: italic">superset</span> of
 <a href="Alternative_Data_Designs.html#%28tech._dotgameworld%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld</span></a>.  Fortunately, the API tells us that the
 <span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29" class="RktStxLink" data-pltdoc="x">stop-when</a></span> function will process the result of a handler before it
 flows back to other handlers&#8212;<wbr></wbr>assuming it is supplied. Put differently,
 the only function that really needs to know about strings as inputs is
 <span class="RktSym">over?</span> and if it sees a string, it must stop the game. So let&rsquo;s
 look at the wish list again:</p><p><div class="SIntrapara"><ul><li><p><div class="SIntrapara">a tick handler:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="Alternative_Data_Designs.html#%28tech._dotgameworld%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld</span></a><span class="RktCmt"> -&gt; </span><a href="Alternative_Data_Designs.html#%28tech._dotgameworld%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld</span></a><span class="RktCmt"> </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">create a random world that is one posn longer than this one </span></td></tr></table></blockquote></div></p></li><li><p><div class="SIntrapara">a rendering function:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="Alternative_Data_Designs.html#%28tech._dotgameworld%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld</span></a><span class="RktCmt"> -&gt; Image </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">render this world (list of posns) as a scene of dots </span></td></tr></table></blockquote></div></p></li><li><p><div class="SIntrapara">a mouse handler:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="Alternative_Data_Designs.html#%28tech._dotgameworld%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld</span></a><span class="RktCmt"> Nat Nat MouseEvent -&gt; </span><a href="Alternative_Data_Designs.html#%28tech._dotgameworld..v2%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld.v2</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">is the player</span><span class="RktCmt">'</span><span class="RktCmt">s mouse click on a dot in this world? </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-style: italic">if so produce a string!</span></td></tr></table></blockquote></div></p></li><li><p><div class="SIntrapara">a function that checks whether the game is over, and that is only the
case when the input is possibly a string:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="Alternative_Data_Designs.html#%28tech._dotgameworld..v2%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld.v2</span></a><span class="RktCmt"> -&gt; Boolean </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">is the game over? </span></td></tr></table></blockquote></div></p></li></ul></div><div class="SIntrapara">The one remaining problem is that the rendering function doesn&rsquo;t deal with
 strings. This is easily fixed by supplying a function that draws final
 worlds:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">String -&gt; Image </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">draw the final world state, which is just a string </span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">draw-final</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%29%29" class="RktValLink" data-pltdoc="x">overlay</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29" class="RktValLink" data-pltdoc="x">text</a></span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktVal">22</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">BGRD</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara">For completeness, here is the revised <span class="RktSym">main</span> function:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Nat -&gt; World.v1</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">start the world with n+1 dots </span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">main.v2</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29" class="RktStxLink" data-pltdoc="x">big-bang</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">random-world</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._add1%29%29" class="RktValLink" data-pltdoc="x">add1</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29" class="RktStxLink" data-pltdoc="x">on-tick</a></span><span class="hspace">&nbsp;</span><span class="RktSym">add-one</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29" class="RktStxLink" data-pltdoc="x">to-draw</a></span><span class="hspace">&nbsp;</span><span class="RktSym">draw-dots</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-mouse%29%29" class="RktStxLink" data-pltdoc="x">on-mouse</a></span><span class="hspace">&nbsp;</span><span class="RktSym">catch-one</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29" class="RktStxLink" data-pltdoc="x">stop-when</a></span><span class="hspace">&nbsp;</span><span class="RktSym">over?</span><span class="hspace">&nbsp;</span><span class="RktSym">draw-final</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">It differs from the first one in the last line, where it specifies
 <span class="RktSym">draw-final</span> as the function that renders the world when the game
 is over.</div></p><p>And that is all there is to dealing with strings a bit more naturally. This
 treatment would also work in a language such as Java where subtyping is
 similar to the subset reasoning we use here, but it would fail in a
 strictly hierarchical language such as ML. In the latter world, we have to
 reason about the data representation of the game world in a third way.</p><h4>3<tt>&nbsp;</tt><a name="(part._.Empty_is_.Useless)"></a>Empty is Useless</h4><p>This third way exploits a different insight, namely, that the game&#8212;<wbr></wbr>as
 discussed so far&#8212;<wbr></wbr>can never create an empty list. Our <span class="RktSym">main</span>
 function always starts the game with at least one dot. By specification,
 the clock ticks every second, and the tick handlers creates a world with
 one more dot. In short, it is acceptable to think of the <span class="RktSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#%28def._%28%28lib._racket%2Flist..rkt%29._empty%29%29" class="RktValLink" data-pltdoc="x">empty</a></span>
 list as a special element in <a href="Alternative_Data_Designs.html#%28tech._dotgameworld%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld</span></a>.</p><p><div class="SIntrapara">We can exploit this special nature of <span class="RktSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#%28def._%28%28lib._racket%2Flist..rkt%29._empty%29%29" class="RktValLink" data-pltdoc="x">empty</a></span> via a change in the
 interpretation of the data definition:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="Alternative_Data_Designs.html#%28tech._dotgameworld%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld</span></a><span class="RktCmt"> = [Listof Posn]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Posn = (make-posn Nat Nat)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">interpretation: empty represents the final world, </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">a non-empty list represents the centers of the dots </span></td></tr></table></blockquote></div><div class="SIntrapara">This small change, in turns, suggests a third variant of the main
 function:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Nat -&gt; World.v1</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">start the world with n+1 dots </span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">main.v3</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._big-bang%29%29" class="RktStxLink" data-pltdoc="x">big-bang</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">random-world</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._add1%29%29" class="RktValLink" data-pltdoc="x">add1</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-tick%29%29" class="RktStxLink" data-pltdoc="x">on-tick</a></span><span class="hspace">&nbsp;</span><span class="RktSym">add-one</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._to-draw%29%29" class="RktStxLink" data-pltdoc="x">to-draw</a></span><span class="hspace">&nbsp;</span><span class="RktSym">draw-dots</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._on-mouse%29%29" class="RktStxLink" data-pltdoc="x">on-mouse</a></span><span class="hspace">&nbsp;</span><span class="RktSym">catch-one.v3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29" class="RktStxLink" data-pltdoc="x">stop-when</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#%28def._%28%28lib._racket%2Flist..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">draw-final.v3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Naturally, this change expects that <span class="RktSym">catch-one.v3</span> produces
 <span class="RktSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#%28def._%28%28lib._racket%2Flist..rkt%29._empty%29%29" class="RktValLink" data-pltdoc="x">empty</a></span> when a mouse click hit a visible dot.</div></p><p><div class="SIntrapara">Furthermore, as the change in name for <span class="RktSym">draw-final</span> indicates, we
 need to be careful with drawing the final world. If we were to use
 <span class="RktSym">draw-final</span> from above, it would signal an error because it
 assumes the input is a string. Now the input is just a regular world,
 though from the <span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpuniverse.html#%28form._world._%28%28lib._2htdp%2Funiverse..rkt%29._stop-when%29%29" class="RktStxLink" data-pltdoc="x">stop-when</a></span> test we know it&rsquo;s the <span class="RktSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#%28def._%28%28lib._racket%2Flist..rkt%29._empty%29%29" class="RktValLink" data-pltdoc="x">empty</a></span>
 list. We do know, however, that the final scene should just say
 &ldquo;congratulations&rdquo; and that is easy to accomplish:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="Alternative_Data_Designs.html#%28tech._dotgameworld%29" class="techoutside" data-pltdoc="x"><span class="techinside">DotGameWorld</span></a><span class="RktCmt"> -&gt; Image </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">draw the final scene, which is always the empty list </span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">draw-final.v3</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._overlay%29%29" class="RktValLink" data-pltdoc="x">overlay</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._text%29%29" class="RktValLink" data-pltdoc="x">text</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"CONGRATULATIONS!"</span><span class="hspace">&nbsp;</span><span class="RktVal">22</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">BGRD</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>The best point is that with this change, the &ldquo;naive&rdquo; design from the
 beginning of the essay works out perfectly.  The rest of the program
 consists of some 10 lines of additional code.</p><h4>4<tt>&nbsp;</tt><a name="(part._.Conclusion)"></a>Conclusion</h4><p>The three sections show how the choice of a data representation and the
 existing APIs of a language are intertwined. In this particular example,
 the world teachpack allows a separation of rendering for intermediate
 state from the rendering for final states; because of this twist, we can
 use <span class="RktSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#%28def._%28%28lib._racket%2Flist..rkt%29._empty%29%29" class="RktValLink" data-pltdoc="x">empty</a></span> as the final world. In general, it is important to
 explore data representations for real programs and not to stick to the
 first one that comes to mind.</p><p>Another point to observe is that different representations come with
 different advantages. Consider a small change to the problem statement:</p><blockquote><p>... at which point the software should display the
text &ldquo;Congratulations: &lt;nm&gt;&rdquo; in the center of the canvas, where &lt;nm&gt; is
the number of dots on the screen. Players can now measure and compare
their performance.</p></blockquote><p><div class="SIntrapara">Clearly, the last solution cannot possible accommodate this change. Since
 the <span class="RktSym">catch-one.v3</span> function produces <span class="RktSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#%28def._%28%28lib._racket%2Flist..rkt%29._empty%29%29" class="RktValLink" data-pltdoc="x">empty</a></span> when the mouse
 click hit a dot, the length information is lost. In contrast, we can
 easily modify the <span class="RktSym">catch-one.v2</span> function from the string based
 solutions so that it returns an appropriate string when the game is over:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string-append%29%29" class="RktValLink" data-pltdoc="x">string-append</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Congratulations: your game world contains "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._number-~3estring%29%29" class="RktValLink" data-pltdoc="x">number-&gt;string</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._length%29%29" class="RktValLink" data-pltdoc="x">length</a></span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">" dots. Can you do better next time?"</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>When you teach a course that allows sufficiently interesting trade-offs
 like the ones discussed here, formulate exercises that tease out these
 problems. Your students will greatly benefit from exploring and comparing
 alternative data representation ideas. That&rsquo;s how real life works, and
 with DrRacket it is easy to explore trade-offs in a technically meaningful
 way.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="turing_is_useless.html" title="backward to &quot;Turing is Useless&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;On HtDP&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="_SL__Not_Racket.html" title="forward to &quot;*SL, Not Racket&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>